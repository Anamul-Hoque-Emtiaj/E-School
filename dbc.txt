create sequence SEQ
/

create table "Users"
(
    USER_ID     NUMBER default AHE.SEQ.nextval not null
        constraint USERS_PK
            primary key,
    NAME        VARCHAR2(50)                   not null,
    EMAIL       VARCHAR2(50)                   not null,
    PASSWORD    VARCHAR2(50)                   not null,
    MOBILE_NO   NUMBER,
    INSTITUTION VARCHAR2(50)
)
/

comment on table "Users" is 'ALL user''s table e.c Students, Teachers'
/

create table "Students"
(
    S_ID            NUMBER           not null
        constraint STUDENTS_PK
            primary key
        constraint STUDENTS_USERS_USER_ID_FK
            references "Users",
    CLASS           NUMBER,
    DEPT            VARCHAR2(50),
    COURSE_ENROLLED NUMBER default 0 not null
)
/

comment on table "Students" is 'Student''s table'
/

create table "Teachers"
(
    T_ID         NUMBER       not null
        constraint TEACHERS_PK
            primary key
        constraint TEACHERS_USERS_USER_ID_FK
            references "Users",
    SPECIALITY   VARCHAR2(50) not null,
    DESIGNATION  VARCHAR2(50) not null,
    COURSE_TAKEN NUMBER default 0
)
/

comment on table "Teachers" is 'Teacher''s Table'
/

create table "Courses"
(
    COURSE_ID       NUMBER default AHE.SEQ.nextval not null
        constraint COURSES_PK
            primary key,
    T_ID            NUMBER                         not null
        constraint COURSES_TEACHERS_T_ID_FK
            references "Teachers",
    TITLE           VARCHAR2(100)                  not null,
    SUBJECT         VARCHAR2(50)                   not null,
    DURATION        NUMBER                         not null,
    DESCRIPTIONS    VARCHAR2(200),
    "LEVEL"         VARCHAR2(100),
    APPROVED        NUMBER default 0               not null,
    RATTING         NUMBER default 0               not null,
    NUM_OF_STUDENTS NUMBER default 0               not null
)
/

comment on table "Courses" is 'Course''s Table'
/

create unique index COURSES_TITLE_UINDEX
    on "Courses" (TITLE)
/

create table "Admins"
(
    ADMIN_ID NUMBER default AHE.SEQ.nextval not null
        constraint ADMINS_PK
            primary key,
    NAME     VARCHAR2(50)                   not null,
    EMAIL    VARCHAR2(50)                   not null,
    PASSWORD VARCHAR2(50)                   not null
)
/

comment on table "Admins" is 'Admin''s Table'
/

create unique index ADMINS_EMAIL_UINDEX
    on "Admins" (EMAIL)
/

create table "Enrollment"
(
    ENROLL_ID NUMBER default AHE.SEQ.nextval not null
        constraint ENROLLMENT_PK
            primary key,
    S_ID      NUMBER                         not null
        constraint ENROLLMENT_STUDENTS_S_ID_FK
            references "Students",
    COURSE_ID NUMBER                         not null
        constraint ENROLLMENT_COURSES_COURSE_ID_FK
            references "Courses",
    "Date"    DATE   default CURRENT_DATE,
    PROGRESS  NUMBER default 0               not null
)
/

comment on table "Enrollment" is 'Courses enrollment history'
/

create table "Topics"
(
    TOPIC_ID           NUMBER default AHE.SEQ.nextval not null
        constraint TOPICS_PK
            primary key,
    TOPIC_NAME         VARCHAR2(100)                  not null,
    TOPIC_DESCRIPTIONS VARCHAR2(250)                  not null,
    COURSE_ID          NUMBER                         not null
        constraint TOPICS_COURSES_COURSE_ID_FK
            references "Courses",
    SERIAL             NUMBER default AHE.SEQ.nextval not null
)
/

comment on table "Topics" is 'Content''s topics of  courses'
/

create table "Contents"
(
    CONTENT_ID NUMBER default AHE.SEQ.nextval not null
        constraint CONTENTS_PK
            primary key,
    NAME       VARCHAR2(100)                  not null,
    TOPIC_ID   NUMBER                         not null
        constraint CONTENTS_TOPICS_TOPIC_ID_FK
            references "Topics",
    SERIAL     NUMBER default AHE.SEQ.nextval not null
)
/

comment on table "Contents" is 'Contents of courses'
/

create table "Video_Contents"
(
    L_ID        NUMBER        not null
        constraint VIDEO_CONTENTS_PK
            primary key
        constraint VIDEO_CONTENTS_CONTENTS_CONTENT_ID_FK
            references "Contents",
    LINK        VARCHAR2(100) not null,
    DESCRIPTION VARCHAR2(250),
    DURATION    NUMBER        not null
)
/

comment on table "Video_Contents" is 'Video_Lecture of courses'
/

create table "Quizs"
(
    E_ID             NUMBER not null
        constraint QUIZS_PK
            primary key
        constraint QUIZS_CONTENTS_CONTENT_ID_FK
            references "Contents",
    MARKS            NUMBER not null,
    NUM_OF_QUESTIONS NUMBER not null
)
/

comment on table "Quizs" is 'Exam table'
/

create table "Questions"
(
    Q_ID        NUMBER default AHE.SEQ.nextval not null
        constraint QUESTIONS_PK
            primary key,
    E_ID        NUMBER                         not null
        constraint QUESTIONS_QUIZS_E_ID_FK
            references "Quizs",
    "Questions" VARCHAR2(150)                  not null,
    OP1         VARCHAR2(75)                   not null,
    OP2         VARCHAR2(75)                   not null,
    OP3         VARCHAR2(75)                   not null,
    OP4         VARCHAR2(75)                   not null,
    RA          NUMBER                         not null,
    NUM         NUMBER default 1               not null,
    SERIAL      NUMBER default AHE.SEQ.nextval
)
/

comment on table "Questions" is 'Question''s of quizes'
/

create table "Take_Exams"
(
    ID             NUMBER default AHE.SEQ.nextval not null
        constraint TAKE_EXAMS_PK
            primary key,
    S_ID           NUMBER                         not null
        constraint TAKE_EXAMS_STUDENTS_S_ID_FK
            references "Students",
    E_ID           NUMBER                         not null
        constraint TAKE_EXAMS_QUIZS_E_ID_FK
            references "Quizs",
    CORRECTED_QUES NUMBER                         not null,
    OBTAINED_MARKS NUMBER                         not null
)
/

comment on table "Take_Exams" is 'Exam''s history table'
/

create table "Completion"
(
    ID   NUMBER default AHE.SEQ.nextval not null
        constraint COMPLETION_PK
            primary key,
    S_ID NUMBER                         not null
        constraint COMPLETION_STUDENTS_S_ID_FK
            references "Students",
    C_ID NUMBER                         not null
        constraint COMPLETION_VIDEO_CONTENTS_L_ID_FK
            references "Video_Contents"
)
/

comment on table "Completion" is 'Completion history of video lectures'
/

create table "Feedback"
(
    ID      NUMBER default AHE.SEQ.nextval not null
        constraint FEEDBACK_PK
            primary key,
    C_ID    NUMBER                         not null
        constraint FEEDBACK_COURSES_COURSE_ID_FK
            references "Courses",
    S_ID    NUMBER                         not null
        constraint FEEDBACK_STUDENTS_S_ID_FK
            references "Students",
    RATTING NUMBER                         not null,
    REVIEW  VARCHAR2(250)
)
/

comment on table "Feedback" is 'Enrolled student''s feedback on courses'
/

create table "Forums"
(
    F_ID        NUMBER       default AHE.SEQ.nextval not null
        constraint FORUMS_PK
            primary key,
    C_ID        NUMBER                               not null
        constraint FORUMS_COURSES_COURSE_ID_FK
            references "Courses",
    U_ID        NUMBER                               not null
        constraint FORUMS_USERS_USER_ID_FK
            references "Users",
    PAR_COM_ID  NUMBER       default -1
        constraint FORUMS_FORUMS_F_ID_FK
            references "Forums",
    DESCRIPTION VARCHAR2(250)                        not null,
    "DATE"      TIMESTAMP(6) default CURRENT_TIMESTAMP
)
/

comment on table "Forums" is 'Disscussion Forum''s table of courses'
/

create table "Notifications"
(
    ID   NUMBER default AHE.SEQ.nextval not null
        constraint NOTIFICATIONS_PK
            primary key,
    U_ID NUMBER                         not null
        constraint NOTIFICATIONS_USERS_USER_ID_FK
            references "Users",
    SEEN NUMBER default 0               not null,
    LINK VARCHAR2(150)                  not null
)
/

